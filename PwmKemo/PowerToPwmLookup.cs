using System.Collections.Generic;

namespace GPIOControl.PwmKemo;

static class PowerToPwmLookup
{
    private static Dictionary<int, int> lookUp;

    private static int getPwm(int power)
    {
        var result = lookUp.TryGetValue(power, out int pwm);
        return pwm;
    }

    public static int LookUp(int power)
    {
        if (lookUp != null)
        {
            return getPwm(power);
        }
        else
        {
            lookUp = new Dictionary<int, int>
            {
                { 0 ,     0},
                { 1 , 10070},
                { 2 , 19939},
                { 3 , 29609},
                { 4 , 39080},
                { 5 , 48357},
                { 6 , 57439},
                { 7 , 66329},
                { 8 , 75028},
                { 9 , 83538},
                { 10    , 91862},
                { 11    ,100000},
                { 12    ,104266},
                { 13    ,108353},
                { 14    ,112364},
                { 15    ,116300},
                { 16    ,120162},
                { 17    ,123954},
                { 18    ,127675},
                { 19    ,131327},
                { 20    ,134913},
                { 21    ,138433},
                { 22    ,141890},
                { 23    ,145284},
                { 24    ,148616},
                { 25    ,151890},
                { 26    ,155105},
                { 27    ,158263},
                { 28    ,161366},
                { 29    ,164415},
                { 30    ,167411},
                { 31    ,170356},
                { 32    ,173250},
                { 33    ,176096},
                { 34    ,178894},
                { 35    ,181645},
                { 36    ,184351},
                { 37    ,187013},
                { 38    ,189632},
                { 39    ,192210},
                { 40    ,194747},
                { 41    ,197244},
                { 42    ,200000},
                { 43    ,202124},
                { 44    ,204509},
                { 45    ,206859},
                { 46    ,209174},
                { 47    ,211457},
                { 48    ,213707},
                { 49    ,215925},
                { 50    ,218114},
                { 51    ,220272},
                { 52    ,222403},
                { 53    ,224505},
                { 54    ,226581},
                { 55    ,228631},
                { 56    ,230656},
                { 57    ,232657},
                { 58    ,234634},
                { 59    ,236589},
                { 60    ,238522},
                { 61    ,240433},
                { 62    ,242325},
                { 63    ,244197},
                { 64    ,246050},
                { 65    ,247884},
                { 66    ,249702},
                { 67    ,251502},
                { 68    ,253287},
                { 69    ,255056},
                { 70    ,256810},
                { 71    ,258549},
                { 72    ,260276},
                { 73    ,261989},
                { 74    ,263689},
                { 75    ,265378},
                { 76    ,267055},
                { 77    ,268722},
                { 78    ,270378},
                { 79    ,272024},
                { 80    ,273661},
                { 81    ,275289},
                { 82    ,276909},
                { 83    ,278521},
                { 84    ,280125},
                { 85    ,281723},
                { 86    ,283313},
                { 87    ,284898},
                { 88    ,286477},
                { 89    ,288050},
                { 90    ,289619},
                { 91    ,291182},
                { 92    ,292742},
                { 93    ,294297},
                { 94    ,295849},
                { 95    ,297397},
                { 96    ,298943},
                { 97    ,300000},
                { 98    ,302026},
                { 99    ,303564},
                { 100   ,305100},
                { 101   ,306635},
                { 102   ,308168},
                { 103   ,309701},
                { 104   ,311232},
                { 105   ,312763},
                { 106   ,314293},
                { 107   ,315823},
                { 108   ,317353},
                { 109   ,318883},
                { 110   ,320413},
                { 111   ,321944},
                { 112   ,323476},
                { 113   ,325009},
                { 114   ,326542},
                { 115   ,328076},
                { 116   ,329612},
                { 117   ,331149},
                { 118   ,332688},
                { 119   ,334228},
                { 120   ,335770},
                { 121   ,337314},
                { 122   ,338860},
                { 123   ,340408},
                { 124   ,341957},
                { 125   ,343509},
                { 126   ,345063},
                { 127   ,346620},
                { 128   ,348179},
                { 129   ,349740},
                { 130   ,351303},
                { 131   ,352869},
                { 132   ,354438},
                { 133   ,356009},
                { 134   ,357583},
                { 135   ,359159},
                { 136   ,360738},
                { 137   ,362319},
                { 138   ,363903},
                { 139   ,365490},
                { 140   ,367079},
                { 141   ,368671},
                { 142   ,370266},
                { 143   ,371863},
                { 144   ,373463},
                { 145   ,375066},
                { 146   ,376670},
                { 147   ,378278},
                { 148   ,379888},
                { 149   ,381501},
                { 150   ,383116},
                { 151   ,384733},
                { 152   ,386353},
                { 153   ,387975},
                { 154   ,389600},
                { 155   ,391227},
                { 156   ,392856},
                { 157   ,394487},
                { 158   ,396121},
                { 159   ,397757},
                { 160   ,400000},
                { 161   ,401034},
                { 162   ,402676},
                { 163   ,404320},
                { 164   ,405966},
                { 165   ,407613},
                { 166   ,409263},
                { 167   ,410914},
                { 168   ,412567},
                { 169   ,414222},
                { 170   ,415878},
                { 171   ,417536},
                { 172   ,419196},
                { 173   ,420857},
                { 174   ,422519},
                { 175   ,424183},
                { 176   ,425849},
                { 177   ,427516},
                { 178   ,429184},
                { 179   ,430853},
                { 180   ,432524},
                { 181   ,434196},
                { 182   ,435870},
                { 183   ,437545},
                { 184   ,439220},
                { 185   ,440897},
                { 186   ,442576},
                { 187   ,444255},
                { 188   ,445936},
                { 189   ,447618},
                { 190   ,449301},
                { 191   ,450985},
                { 192   ,452671},
                { 193   ,454357},
                { 194   ,456045},
                { 195   ,457734},
                { 196   ,459425},
                { 197   ,461117},
                { 198   ,462810},
                { 199   ,464505},
                { 200   ,466201},
                { 201   ,467898},
                { 202   ,469598},
                { 203   ,471299},
                { 204   ,473001},
                { 205   ,474706},
                { 206   ,476412},
                { 207   ,478120},
                { 208   ,479831},
                { 209   ,481543},
                { 210   ,483258},
                { 211   ,484975},
                { 212   ,486695},
                { 213   ,488417},
                { 214   ,490143},
                { 215   ,491871},
                { 216   ,493602},
                { 217   ,495337},
                { 218   ,497075},
                { 219   ,498816},
                { 220   ,500000},
                { 221   ,502311},
                { 222   ,504064},
                { 223   ,505822},
                { 224   ,507585},
                { 225   ,509352},
                { 226   ,511125},
                { 227   ,512903},
                { 228   ,514686},
                { 229   ,516475},
                { 230   ,518271},
                { 231   ,520073},
                { 232   ,521881},
                { 233   ,523697},
                { 234   ,525520},
                { 235   ,527351},
                { 236   ,529189},
                { 237   ,531036},
                { 238   ,532892},
                { 239   ,534757},
                { 240   ,536631},
                { 241   ,538515},
                { 242   ,540410},
                { 243   ,542315},
                { 244   ,544231},
                { 245   ,546159},
                { 246   ,548099},
                { 247   ,550052},
                { 248   ,552017},
                { 249   ,553996},
                { 250   ,555989},
                { 251   ,557996},
                { 252   ,560018},
                { 253   ,562056},
                { 254   ,564110},
                { 255   ,566181},
                { 256   ,568268},
                { 257   ,570374},
                { 258   ,572498},
                { 259   ,574642},
                { 260   ,576805},
                { 261   ,578988},
                { 262   ,581193},
                { 263   ,583419},
                { 264   ,585668},
                { 265   ,587939},
                { 266   ,590235},
                { 267   ,592555},
                { 268   ,594901},
                { 269   ,597273},
                { 270   ,600000},
                { 271   ,602099},
                { 272   ,604554},
                { 273   ,607038},
                { 274   ,609553},
                { 275   ,612099},
                { 276   ,614677},
                { 277   ,617288},
                { 278   ,619933},
                { 279   ,622613},
                { 280   ,625328},
                { 281   ,628081},
                { 282   ,630871},
                { 283   ,633699},
                { 284   ,636568},
                { 285   ,639477},
                { 286   ,642428},
                { 287   ,645422},
                { 288   ,648460},
                { 289   ,651544},
                { 290   ,654673},
                { 291   ,657851},
                { 292   ,661076},
                { 293   ,664352},
                { 294   ,667679},
                { 295   ,671058},
                { 296   ,674490},
                { 297   ,677978},
                { 298   ,681521},
                { 299   ,685122},
                { 300   ,688782},
                { 301   ,692502},
                { 302   ,696284},
                { 303   ,700000},
                { 304   ,706476},
                { 305   ,713155},
                { 306   ,720036},
                { 307   ,727121},
                { 308   ,734408},
                { 309   ,741897},
                { 310   ,749590},
                { 311   ,757485},
                { 312   ,765582},
                { 313   ,773883},
                { 314   ,782386},
                { 315   ,791092},
                { 316   ,800000},
                { 317   ,850000},
                { 318   ,900000}
            };
            return getPwm(power);
        }
    }
}
