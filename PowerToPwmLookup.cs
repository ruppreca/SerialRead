using System.Collections.Generic;
namespace GPIO_Control;

static class PowerToPwmLookup
{
    private static Dictionary<double, int> lookUp;

    private static int getPwm(double power)
    {
        var result = lookUp.TryGetValue(power, out int pwm);
        return pwm;
    }

    public static int LookUp(double power)
    {
        if (lookUp != null)
        {
            return getPwm(power);
        }
        else
        {
            lookUp = new Dictionary<double, int>
            {
                { 0.0 , 0       },
                { 2.0 , 22112   },
                { 4.0 , 42352   },
                { 6.0 , 60829   },
                { 8.0 , 77649   },
                { 10.0, 92917   },
                { 11.0, 100000  },
                { 12.0, 104266  },
                { 14.0, 112364  },
                { 16.0, 120162  },
                { 18.0, 127675  },
                { 20.0, 134913  },
                { 22.0, 141890  },
                { 24.0, 148616  },
                { 26.0, 155105  },
                { 28.0, 161366  },
                { 30.0, 167411  },
                { 32.0, 173250  },
                { 34.0, 178894  },
                { 36.0, 184351  },
                { 38.0, 189632  },
                { 40.0, 194747  },
                { 42.0, 199702  },
                { 44.0, 204509  },
                { 46.0, 209174  },
                { 48.0, 213707  },
                { 50.0, 218114  },
                { 52.0, 222403  },
                { 54.0, 226581  },
                { 56.0, 230656  },
                { 58.0, 234634  },
                { 60.0, 238522  },
                { 62.0, 242325  },
                { 64.0, 246050  },
                { 66.0, 249702  },
                { 68.0, 253287  },
                { 70.0, 256810  },
                { 72.0, 260276  },
                { 74.0, 263689  },
                { 76.0, 267055  },
                { 78.0, 270378  },
                { 80.0, 273661  },
                { 82.0, 276909  },
                { 84.0, 280125  },
                { 86.0, 283313  },
                { 88.0, 286477  },
                { 90.0, 289619  },
                { 92.0, 292742  },
                { 94.0, 295849  },
                { 96.0, 298943  },
                { 97.0, 300485  },
                { 98.0, 302026  },
                { 100.0, 305100 },
                { 102.0, 308168 },
                { 104.0, 311232 },
                { 106.0, 314293 },
                { 108.0, 317353 },
                { 110.0, 320413 },
                { 112.0, 323476 },
                { 114.0, 326542 },
                { 116.0, 329612 },
                { 118.0, 332688 },
                { 120.0, 335770 },
                { 122.0, 338860 },
                { 124.0, 341957 },
                { 126.0, 345063 },
                { 128.0, 348179 },
                { 130.0, 351303 },
                { 132.0, 354438 },
                { 134.0, 357583 },
                { 136.0, 360738 },
                { 138.0, 363903 },
                { 140.0, 367079 },
                { 142.0, 370266 },
                { 144.0, 373463 },
                { 146.0, 376670 },
                { 148.0, 379888 },
                { 150.0, 383116 },
                { 152.0, 386353 },
                { 154.0, 389600 },
                { 156.0, 392856 },
                { 158.0, 396121 },
                { 160.0, 399395 },
                { 162.0, 402676 },
                { 164.0, 405966 },
                { 166.0, 409263 },
                { 168.0, 412567 },
                { 170.0, 415878 },
                { 172.0, 419196 },
                { 174.0, 422519 },
                { 176.0, 425849 },
                { 178.0, 429184 },
                { 180.0, 432524 },
                { 182.0, 435870 },
                { 184.0, 439220 },
                { 186.0, 442576 },
                { 188.0, 445936 },
                { 190.0, 449301 },
                { 192.0, 452671 },
                { 194.0, 456045 },
                { 196.0, 459425 },
                { 198.0, 462810 },
                { 200.0, 466201 },
                { 202.0, 469598 },
                { 204.0, 473001 },
                { 206.0, 476412 },
                { 208.0, 479831 },
                { 210.0, 483258 },
                { 212.0, 486695 },
                { 214.0, 490143 },
                { 216.0, 493602 },
                { 218.0, 497075 },
                { 220.0, 500561 },
                { 222.0, 504064 },
                { 224.0, 507585 },
                { 226.0, 511125 },
                { 228.0, 514686 },
                { 230.0, 518271 },
                { 232.0, 521881 },
                { 234.0, 525520 },
                { 236.0, 529189 },
                { 238.0, 532892 },
                { 240.0, 536631 },
                { 242.0, 540410 },
                { 244.0, 544231 },
                { 246.0, 548099 },
                { 248.0, 552017 },
                { 250.0, 555989 },
                { 252.0, 560018 },
                { 254.0, 564110 },
                { 256.0, 568268 },
                { 258.0, 572498 },
                { 260.0, 576805 },
                { 262.0, 581193 },
                { 264.0, 585668 },
                { 266.0, 590235 },
                { 268.0, 594901 },
                { 270.0, 599672 },
                { 272.0, 604554 },
                { 274.0, 609553 },
                { 276.0, 614677 },
                { 278.0, 619933 },
                { 280.0, 625328 },
                { 282.0, 630871 },
                { 284.0, 636568 },
                { 286.0, 642428 },
                { 288.0, 648460 },
                { 290.0, 654673 },
                { 292.0, 661076 },
                { 294.0, 667679 },
                { 296.0, 674490 },
                { 298.0, 681521 },
                { 300.0, 688782 },
                { 302.0, 696284 },
                { 303.0, 700000 },
                { 304.0, 706098 },
                { 306.0, 719036 },
                { 308.0, 733000 },
                { 310.0, 748033 },
                { 312.0, 764182 },
                { 314.0, 781489 },
                { 316.0, 800000 },
                { 315.0, 850000 },
                { 318.0, 900000 }
            };
            return getPwm(power);
        }
    }
}
